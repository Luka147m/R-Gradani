generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model izdavac {
  id            String          @id
  publisher     String?
  description   String?
  skup_podataka skup_podataka[]
}

model komentar {
  id            BigInt         @id
  user_id       BigInt?
  skup_id       String?
  created       DateTime?      @db.Timestamp(6)
  subject       String?
  message       String?
  skup_podataka skup_podataka? @relation(fields: [skup_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  odgovor       odgovor[]
  slika         slika[]
}

model odgovor {
  id          Int       @id @default(autoincrement())
  komentar_id BigInt?
  created     DateTime? @db.Timestamp(6)
  message     Json?
  score       Float?
  komentar    komentar? @relation(fields: [komentar_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model resurs {
  id                    String         @id
  skup_id               String?
  available_through_api Boolean?
  name                  String?
  description           String?
  created               DateTime?      @db.Timestamp(6)
  last_modified         DateTime?      @db.Timestamp(6)
  format                String?
  mimetype              String?
  state                 String?
  size                  Int?
  url                   String?
  skup_podataka         skup_podataka? @relation(fields: [skup_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model skup_podataka {
  id                String     @id
  title             String?
  refresh_frequency String?
  theme             String?
  description       String?
  url               String?
  state             String?
  created           DateTime?  @db.Timestamp(6)
  modified          DateTime?  @db.Timestamp(6)
  isopen            Boolean?
  access_rights     String?
  license_title     String?
  license_url       String?
  license_id        String?
  publisher_id      String?
  tags              Json?
  komentar          komentar[]
  resurs            resurs[]
  izdavac           izdavac?   @relation(fields: [publisher_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model slika {
  komentar_id   BigInt
  content_hash  String
  original_name String?
  mime_type     String?
  created       DateTime? @db.Timestamp(6)
  komentar      komentar  @relation(fields: [komentar_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([komentar_id, content_hash])
}
